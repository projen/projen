# ~~ Generated by projen. To modify, edit .projenrc.ts and run "node ./projen.js".

name: integ
on:
  pull_request: {}
  workflow_dispatch: {}
  merge_group: {}
jobs:
  integ-node:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    env:
      CI: "0"
    steps:
      - name: Checkout
        uses: actions/checkout@v5
      - uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
      - name: Install dependencies
        run: npm ci
      - name: Compile
        run: node ./projen.js compile
      - name: Package
        run: node ./projen.js package:js
      - name: Run Node integration test
        run: node ./projen.js integ:node
    strategy:
      fail-fast: false
      matrix:
        node-version:
          - lts/-2
          - lts/-1
          - lts/*
  integ-python:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    env:
      CI: "0"
    steps:
      - name: Checkout
        uses: actions/checkout@v5
      - uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}
      - uses: actions/setup-node@v4
        with:
          node-version: lts/*
      - name: Install dependencies
        run: npm ci
      - name: Compile
        run: node ./projen.js compile
      - name: Package
        run: node ./projen.js package:python
      - name: Run Python integration test
        run: node ./projen.js integ:python
    strategy:
      fail-fast: false
      matrix:
        python-version:
          - "3.10"
          - "3.11"
          - "3.12"
          - "3.13"
          - "3.14"
  integ-go:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    env:
      CI: "0"
    steps:
      - name: Checkout
        uses: actions/checkout@v5
      - uses: actions/setup-go@v5
        with:
          go-version: ${{ matrix.go-version }}
      - uses: actions/setup-node@v4
        with:
          node-version: lts/*
      - name: Install dependencies
        run: npm ci
      - name: Compile
        run: node ./projen.js compile
      - name: Package
        run: node ./projen.js package:go
      - name: Run Go integration test
        run: node ./projen.js integ:go
    strategy:
      fail-fast: false
      matrix:
        go-version:
          - 1.24.x
          - 1.25.x
  integ-java:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    env:
      CI: "0"
    steps:
      - name: Checkout
        uses: actions/checkout@v5
      - uses: actions/setup-java@v4
        with:
          java-version: ${{ matrix.java-version }}
          distribution: ${{ matrix.java-distribution }}
      - uses: actions/setup-node@v4
        with:
          node-version: lts/*
      - name: Install dependencies
        run: npm ci
      - name: Compile
        run: node ./projen.js compile
      - name: Package
        run: node ./projen.js package:java
      - name: Run Java integration test
        run: node ./projen.js integ:java
    strategy:
      fail-fast: false
      matrix:
        include:
          - java-version: "8"
            java-distribution: corretto
          - java-version: "11"
            java-distribution: corretto
          - java-version: "17"
            java-distribution: corretto
          - java-version: "21"
            java-distribution: corretto
          - java-version: "25"
            java-distribution: corretto
        java-version:
          - "8"
          - "11"
          - "17"
          - "21"
          - "25"
  integ:
    needs:
      - integ-node
      - integ-python
      - integ-go
      - integ-java
    runs-on: ubuntu-latest
    permissions: {}
    if: always()
    steps:
      - name: integ-node result
        run: echo ${{ needs.integ-node.result }}
      - name: integ-python result
        run: echo ${{ needs.integ-python.result }}
      - name: integ-go result
        run: echo ${{ needs.integ-go.result }}
      - name: integ-java result
        run: echo ${{ needs.integ-java.result }}
      - name: Set status based on integ tests
        if: ${{ needs.integ-node.result != 'success' || needs.integ-python.result != 'success' || needs.integ-go.result != 'success' || needs.integ-java.result != 'success' }}
        run: exit 1
